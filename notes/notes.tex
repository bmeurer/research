\documentclass[12pt,a4paper,final]{article}

\usepackage{bmeurer}
\usepackage{german}
\usepackage{hyperref}
\usepackage{mathpartir}
\usepackage{ngerman}
\usepackage[standard,thmmarks]{ntheorem}

\DeclareMathOperator{\parent}{\mathit{parent}}

\begin{document}


%%%
%%% Baeume
%%%

\section{B"aume}
\label{sec:Baeume}

Basierend auf Loeckx \ETAL \cite[S.~43]{DBLP:books/teu/LoeckxMW86} definieren
wir Baumbereiche und B"aume wie folgt:

\begin{definition} \
  \begin{enumerate}
  \item Die partielle Funktion \mbox{$\parent:\N^* \pto \N^*$} ist definiert durch
    \begin{equation*}
      \parent(w) = 
      \begin{cases}
        v
        & \text{falls $w = v \cdot n$ mit $v \in \N^*$ und $n \in \N$,} \\
        \text{undefiniert}
        & \text{falls $w = \varepsilon$.}
      \end{cases}
    \end{equation*}

  \item Ein \emph{Baumbereich} $D$ ist eine endliche Teilmenge von $\N^*$, welche
    abgeschlossen ist unter der Funktion $\parent$, d.h. \mbox{$\parent(D) \subseteq D$}.
    Die Elemente eines Baumbereichs hei"sen \emph{Knoten}.

  \item Sei $S$ eine beliebige Menge. Ein \emph{$S$-markierter Baum} (oder kurz \emph{Baum})
    ist ein Paar \mbox{$(D,b)$}, wobei $D$ ein Baumbereich ist, und $b$ eine Abbildung
    \mbox{$b:D \to S$}. Die Abbildung $b$ hei"st die \emph{Beschriftung} des
    Baumes und $D$ sein \emph{Definitionsbereich}.
    Wir identifizieren "ublicherweise einen Baum $(D,b)$ mit seiner Beschriftung $b$.
  \end{enumerate}
\end{definition}
Wir werden die folgenden gebr"auchlichen Sprechweisen verwenden: Das Element
\mbox{$\varepsilon \in \N^*$} hei"st \emph{Wurzel}. Wenn $v = \parent(w)$, dann
ist $w$ \emph{Kind} von $v$. Die Anzahl der Kinder eines Knoten hei"st
\emph{Grad} des Knoten. Ein Knoten ohne Kinder hei"st \emph{Blatt}.


%%%
%%% Kalkuele
%%%

\section{Kalk"ule}
\label{sec:Kalkuele}

\begin{definition}[Kalk"ul]
  Ein \emph{Kalk"ul} $\mathcal{K} = (\mathcal{U}, \mathcal{R})$ besteht aus
  \begin{enumerate}
  \item einer Formelmenge $\mathcal{U}$, dem \emph{Universum}, und
  \item einer entscheidbaren Relation $\mathcal{R} \subseteq \mathcal{U}^+$, der \emph{Ableitungsrelation}.
  \end{enumerate}
\end{definition}
Zu jedem Kalk"ul $\mathcal{K}$ l"asst sich eine Funktion
\mbox{$\mathcal{F}:\powerset(\mathcal{U}) \to \powerset(\mathcal{U})$} definieren durch
\[\begin{array}{rcl}
\mathcal{F}(X) &=& \{u \in \mathcal{U} \mid \exists n\in\N,u_1,\ldots,u_n\in X.\,(u_1 \ldots u_n\,u) \in\mathcal{R}\}.
\end{array}\]
$\mathcal{F}$ ist stetig auf dem vollst"andigen Verband $\powerset(\mathcal{U})$, d.h. es
existiert
\begin{itemize}
\item ein kleinster Fixpunkt $\mu\mathcal{F} = \bigcup_{n\in\N}\mathcal{F}^n(\emptyset)$, und
\item ein gr"o"ster Fixpunkt $\nu\mathcal{F} = \bigcap_{n\in\N}\mathcal{F}^n(\mathcal{U})$.
\end{itemize}
Ein \emph{$\mathcal{K}$-Ableitungsbaum} f"ur eine Formel $u \in \mathcal{U}$ ist (endl. oder unendl.)
$\mathcal{U}$-markierter Baum $t$, so dass:
\begin{enumerate}
\item $t(\varepsilon) = u$, und
\item $(t(k \cdot 1),\ldots,t(k \cdot n),t(k)) \in \mathcal{R}$ f"ur jeden Knoten $k$ mit den Kindern $k \cdot 1,\ldots,k \cdot n$.
\end{enumerate}

\begin{theorem} \
  \begin{enumerate}
  \item $u$ besitzt einen endlichen Ableitungsbaum gdw. $u \in \mu\mathcal{F}$.
  \item $u$ besitzt einen beliebigen Ableitungsbaum gdw. $u \in \nu\mathcal{F}$.
  \end{enumerate}
\end{theorem}

\begin{proof} \
  \begin{enumerate}
  \item $u \in \mathcal{F}^n(\emptyset)$ gdw. $u$ besitzt Ableitugnsbaum der H"ohe $\le n$.
  \item 
    \begin{itemize}
    \item[``$\Rightarrow$'']
      Sei $X$ die Menge der Markierungen, dann ist $u \in X$ und f"ur jedes $w \in X$ ex.
      $w_1,\ldots,w_n \in X$ mit $(w_1 \ldots w_n\,w) \in \mathcal{R}$, also
      $w \in \mathcal{F}(X)$. D.h. $u \in X$ und $X$ ist $\mathcal{F}$-konsistent, also
      $u \in X \subseteq \nu \mathcal{F}$.
    \item[``$\Leftarrow$'']
      Der Ableitungsbaum $t$ ist eine partielle Funktion $t: \N^* \pto \nu\mathcal{F}$ induktiv definiert
      durch:
      \begin{itemize}
      \item $(\varepsilon,u) \in t$
      \item Wenn $(k,w) \in t$, dann ex. $n\in\N,w_1,\ldots,w_n \in \nu\mathcal{F}$ --
        denn $w \in \nu\mathcal{F} = \mathcal{F}(\nu\mathcal{F})$ -- mit
        $(w_1 \ldots w_n\,w) \in \mathcal{R}$ \\
        ind. def. $\leadsto$ $(k.i,w_i) \in t$ f"ur $i=1,\ldots,n$.
      \end{itemize}
    \end{itemize}
  \end{enumerate}
\end{proof}


%%%
%%% Semantische Modelle
%%%

\section{Semantische Modelle}
\label{sec:Semantische_Modelle}

\begin{definition}[Semantisches Modell]
  Seien $A$ und $B$ beliebige Mengen.
  Ein \emph{semantisches Modell} $\mathcal{M}$ ist ein Tripel $\bigl(A, B, \Rightarrow\bigr)$,
  geschrieben $\mathcal{M}: A \Rightarrow B$, mit \mbox{$\Rightarrow\ \subseteq A \times B^\infty_{\textsf{err}}$}
  und $B^\infty_{\textsf{err}} = B \uplus \{\infty,\textsf{err}\}$.
\end{definition}
Wir bezeichnen die Elemente $a \in A$ als \emph{Argumente}, und die Elemente $b \in B$
als \emph{Resultate}. Bzgl. $\mathcal{M}: A \Rightarrow B$ sagen wir
\begin{itemize}
\item \emph{$a$ terminiert mit $b$} wenn $a \Rightarrow b$,
\item \emph{$a$ divergiert} wenn $a \Rightarrow \infty$, und
\item \emph{$a$ f"uhrt zu einem Laufzeitfehler} wenn $a \Rightarrow \textsf{err}$.
\end{itemize}
Wir sagen ein solches semantisches Modell \mbox{$\mathcal{M}: A \Rightarrow B$} ist \emph{deterministisch},
wenn $\Rightarrow$ eine Abbildung ist. Ein Argument \mbox{$a \in A$} hei"st \emph{sicher} wenn
\mbox{$a \not\Rightarrow \textsf{err}$}. In einem deterministischen semantischen Modell gen"ugt es
\mbox{$a \Rightarrow \infty$} oder \mbox{$a \Rightarrow b$} f"ur ein beliebiges \mbox{$b \in B$} zu zeigen,
um nachzuweisen, dass $a$ sicher ist.


%%%
%%% Transitionssysteme
%%%

\section{Transitionssysteme}
\label{sec:Transitionssysteme}

\begin{definition}[Transitionssystem]
  Seien $A$ und $B$ beliebige Mengen.
  Ein \emph{Transitionssystem} $\mathcal{T}$ ist ein Quadrupel \mbox{$(\Sigma,\phi,\psi,\rightarrow)$} mit
  \begin{itemize}
  \item einer nicht-leeren Menge $\Sigma$ von \emph{Zust"anden} $\sigma$,
  \item einer \emph{Eingabefunktion} \mbox{$\phi:A \pto \Sigma$},
  \item einer \emph{Ausgabefunktion} \mbox{$\psi:\Sigma \pto B$}, und
  \item einer \emph{Transitionsrelation} $\rightarrow\ \subseteq \Sigma \times \Sigma$.
  \end{itemize}
\end{definition}
Die Elemente $A_0 = \dom(\phi)$ hei"sen \emph{initiale Argumente}. Wir schreiben
\mbox{$\sigma_0 \rightarrow^n \sigma_n$} wenn eine Folge von $n$ Schritten existiert,
so dass \mbox{$\sigma_i \rightarrow \sigma_{i+1}$} f"ur $0 \le i < n$, und wir schreiben
\mbox{$\sigma \rightarrow^* \sigma'$} wenn ein $n \in \N$ existiert, so dass
\mbox{$\sigma \rightarrow^n \sigma'$}. Weiter schreiben wir \mbox{$\sigma \not\rightarrow$}
wenn kein $\sigma' \in \Sigma$ existiert, so dass \mbox{$\sigma \rightarrow \sigma'$}.

\begin{definition}
  Durch jedes Transitionssystem \mbox{$\mathcal{T} = (\Sigma,\phi,\psi,\rightarrow)$} ist ein
  semantisches Modell \mbox{$\mathcal{M}_{\mathcal{T}} = (A,B,\Rightarrow_{\mathcal{T}})$} definiert,
  mit
  \[\begin{array}{lcl}
    a \Rightarrow_{\mathcal{T}} b
    & \text{gdw.} &
    \text{$\phi(a) = \sigma \rightarrow^* \sigma' \not\rightarrow$ und $\psi(\sigma') = b$} \\
    a \Rightarrow_{\mathcal{T}} \textsf{err}
    & \text{gdw.} &
    \text{$\phi(a) = \sigma \rightarrow^* \sigma' \not\rightarrow$ und $\sigma' \not\in \dom(\psi)$} \\
    a \Rightarrow_{\mathcal{T}} \infty
    & \text{gdw.} &
    \text{ex. unendliche Folge $\phi(a) = \sigma_0 \rightarrow \sigma_1 \rightarrow \ldots$}
  \end{array}\]
\end{definition}


%%%
%%% Rekursionssysteme
%%%

\section{Rekursionssysteme}
\label{sec:Rekursionssysteme}

\begin{definition}
  Seien $A$ und $B$ disjunkte Mengen.
  Eine \emph{Rekursionsregel "uber $A$ und $B$} ist eine Relation
  \mbox{$R \subseteq A \times B^* \times (A \cup B)$}, die Menge aller Rekursionsregeln
  "uber $A$ und $B$ bezeichnen wir mit \mbox{$\mathit{Rules}(A,B)$}.
  Jede solche Menge von Rekursionsregeln \mbox{$\mathcal{R} \subseteq \mathit{Rules}(A,B)$}
  bezeichnen wir als \emph{Rekursionssystem}.
\end{definition}


%%%
%%% Stacksemantik
%%%

\subsection{Stacksemantik}
\label{sec:Stacksemantik}

Zu jedem Rekursionssystem \mbox{$\mathcal{R} \subseteq \mathit{Rules}(A,B)$} l"a"st sich ein naives Transistionssystem
\mbox{$\mathcal{T}_{\mathcal{R}} = (\Sigma_{\mathcal{R}},\phi_{\mathcal{R}},\psi_{\mathcal{R}},\rightarrow_{\mathcal{R}} )$}
in Form einer \emph{Stacksemantik} definieren durch
\begin{itemize}
\item $\Sigma_{\mathcal{R}} = (A \cup B \cup \mathcal{R})^+$,
\item $\phi:_{\mathcal{R}}: A \to \Sigma_{\mathcal{R}}, a \mapsto a$,
\item $\psi:_{\mathcal{R}}: \Sigma_{\mathcal{R}} \pto B, b \mapsto b$, und
\item $\rightarrow_{\mathcal{R}}\ \subseteq \Sigma_{\mathcal{R}} \times \Sigma_{\mathcal{R}}$ ist die kleinste
  Relation, welche abgeschlossen ist unter Anwendung der Regeln in Abbildung~\ref{fig:Stacksemantik}.
\end{itemize}
\begin{figure}[htb]
  \centering
  \begin{mathpar}
    \inferrule[(Select)]{
      R \in \mathcal{R} \\
      (a,\varepsilon,x) \in R
    }{
      wa \rightarrow_{\mathcal{R}} waR
    }
    \and
    \inferrule[(Result)]{
      (a,b_1 \ldots b_n,b) \in R
    }{
      waRb_1 \ldots b_n \rightarrow_{\mathcal{R}} wb
    }
    \and
    \inferrule[(Argument)]{
      (a,b_1 \ldots b_n,a') \in R
    }{
      waRb_1 \ldots b_n \rightarrow_{\mathcal{R}} waR b_1 \ldots b_na'
    }
  \end{mathpar}
  \caption{Stacksemantik}
  \label{fig:Stacksemantik}
\end{figure}


%%%
%%% Rekursionssysteme und big steps
%%%

\subsection{Rekursionssysteme und big steps}
\label{sec:Rekursionssysteme_und_big_steps}

Durch jedes Rekursionssystem \mbox{$\mathcal{R} \subseteq \mathit{Rules}(A,B)$} ist auch
eine naive, rein induktive big step Semantik in Form einer Relation
\mbox{$\Downarrow_{\mathcal{R}}\ \subseteq A \times B$} definiert.
\begin{definition}
  \mbox{$\Downarrow_{\mathcal{R}}$} ist die kleinste Relation "uber $A \times B$, so dass gilt:
  \begin{quote}
    Wenn $R \in \mathcal{R}$, $(a,b_1 \ldots b_{i-1},a_i) \in R$ und $a_i \Downarrow_{\mathcal{R}} b_i$
    f"ur $i=1,\ldots,n$ und $n \in \N$, und $(a,b_1 \ldots b_n,b) \in R$, dann gilt auch
    $a \Downarrow_{\mathcal{R}} b$.
  \end{quote}
\end{definition}
Offensichtlich gilt folgender Zusammenhang zwischen den obigen big steps und der Stacksemantik
aus Abschnitt~\ref{sec:Stacksemantik}.
\begin{theorem}
  Sei \mbox{$\mathcal{R} \subseteq \mathit{Rules}(A,B)$}. Dann gilt:
 \mbox{$a \rightarrow_{\mathcal{R}}^* b$} gdw. \mbox{$a \Downarrow_{\mathcal{R}} b$}.
\end{theorem}
Die ``wenn''-Richtung folgt trivialerweise als Spezialfall \mbox{$w = \varepsilon$} aus nachfolgendem
Lemma:
\begin{lemma}
  Wenn \mbox{$a \Downarrow_{\mathcal{R}} b$}, dann \mbox{$wa \rightarrow_{\mathcal{R}}^* wb$}.
\end{lemma}

\begin{proof}
  Via Induktion "uber die L"ange der Herleitung des big steps \mbox{$a \Downarrow_{\mathcal{R}} b$}.
  Nach Voraussetzung existieren also \mbox{$R \in \mathcal{R}$}, \mbox{$n \in \N$} sowie
  \mbox{$a_1,\ldots,a_n \in A$} und \mbox{$b_1,\ldots,b_n \in B$}, so dass
  \mbox{$a_i \Downarrow_{\mathcal{R}} b_i$} und \mbox{$(a,b_1 \ldots b_{i-1},a_i) \in R$}
  f"ur \mbox{$i=1,\ldots,n$}, und \mbox{$(a,b_1 \ldots b_n,b) \in R$}.
  Dann gilt
  \[\begin{array}{rcll}
    wa
    & \rightarrow_{\mathcal{R}}   & waR               & \text{mit \textsc{(Select)}} \\
    & \rightarrow_{\mathcal{R}}^* & waRb_1 \ldots b_n & \text{mit \textsc{(Argument)} und I.V.} \\
    & \rightarrow_{\mathcal{R}}   & wb                & \text{mit \textsc{(Result)}} \\
  \end{array}\]
  was zu zeigen war.
\end{proof}

Die ``genau dann''-Richtung ist etwas aufwendiger zu beweisen. Die grunds"atzliche Idee dabei
ist, dass sich f"ur jede Berechungsfolge \mbox{$a' \rightarrow_{\mathcal{R}}^* wb$} ein big step
\mbox{$a \Downarrow_{\mathcal{R}} b$} abspalten l"a"st, der die Berechung f"ur $b$ beschreibt, ausgehend
von einem $a$, welches zuvor berechnet worden sein muss. Das sieht dann formal wie folgt aus:
\begin{lemma}
  Wenn \mbox{$a' \rightarrow_{\mathcal{R}}^k wb$}, dann ex. \mbox{$l \in \N$} und \mbox{$a \in A$}, so dass
  \mbox{$l < k$}, \mbox{$a \Downarrow_{\mathcal{R}} b$} und \mbox{$a' \rightarrow_{\mathcal{R}}^l wa$}.
\end{lemma}

\begin{proof}
  Via Induktion "uber $k$.
  Der letzte "Ubergangsschritt kann nur mit \textsc{(Result)} aus \mbox{$waRb_1 \ldots b_n$}
  mit \mbox{$a \in A$}, \mbox{$R \in \mathcal{R}$} und \mbox{$(a,b_1 \ldots b_n,b) \in R$}
  hergeleitet worden sein.

  Mittels geschachtelter Induktion "uber $n$ folgern wir unter Ber"ucksichtigung von \textsc{(Argument)},
  dass \mbox{$l_1,\ldots,l_n \in \N$} und \mbox{$a_1,\ldots,a_n \in A$} existieren, so dass
  \mbox{$l_1 < \ldots l_n < k$}, \mbox{$a_i \Downarrow_{\mathcal{R}} b_i$}, \mbox{$(a,b_1 \ldots b_{i-1},a_i) \in R$}
  und \mbox{$a' \rightarrow_{\mathcal{R}}^{l_i} waRb_1 \ldots b_{i-1}$} f"ur \mbox{$i=1,\ldots,n$}.

  Also existiert trivialerweise auch ein \mbox{$l \in \N$}, so dass \mbox{$l < l_1 < \ldots < l_n < k$} und
  \mbox{$a' \rightarrow_{\mathcal{R}}^l wa \rightarrow_{\mathcal{R}} waR$} mit \textsc{(Select)}. Und selbstverst"andlich
  existiert dann auch ein big step $a \Downarrow_{\mathcal{R}} b$.
\end{proof}


%%%
%%% Literatur
%%%

\bibliographystyle{alphadin}
\bibliography{citations}


\end{document}
